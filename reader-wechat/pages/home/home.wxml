<!-- pages/home/home.wxml -->
<view class="home-page">
  <!-- é¡¶éƒ¨æ¬¢è¿åŒº -->
  <view class="welcome-section">
    <view class="welcome-content">
      <text class="welcome-text">æ¬¢è¿ï¼Œ{{userInfo && userInfo.name ? userInfo.name : 'è¯»è€…'}}</text>
      <text class="sub-text">ä»Šæ—¥ {{currentDate}}</text>
    </view>
    <view class="user-avatar" bindtap="goToProfile">
      <image 
        src="{{userInfo && userInfo.avatar ? userInfo.avatar : 'https://img.yzcdn.cn/vant/cat.jpeg'}}" 
        mode="aspectFill"
      />
    </view>
  </view>
  
  <!-- å¿«æ·å…¥å£ -->
  <view class="quick-entry">
    <view class="entry-item" bindtap="goToBooks">
      <view class="entry-icon">
        <text>ğŸ“š</text>
      </view>
      <text class="entry-text">å›¾ä¹¦æŸ¥è¯¢</text>
    </view>
    <view class="entry-item" bindtap="goToBorrow">
      <view class="entry-icon">
        <text>ğŸ“–</text>
      </view>
      <text class="entry-text">æˆ‘çš„å€Ÿé˜…</text>
    </view>
    <view class="entry-item" bindtap="goToReservation">
      <view class="entry-icon">
        <text>â°</text>
      </view>
      <text class="entry-text">æˆ‘çš„é¢„çº¦</text>
    </view>
    <view class="entry-item" bindtap="goToProfile">
      <view class="entry-icon">
        <text>ğŸ‘¤</text>
      </view>
      <text class="entry-text">ä¸ªäººä¸­å¿ƒ</text>
    </view>
  </view>
  
  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-section" wx:if="{{userStats}}">
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-value">{{userStats.totalBorrow || 0}}</text>
        <text class="stat-label">ç´¯è®¡å€Ÿé˜…</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{userStats.currentBorrow || 0}}</text>
        <text class="stat-label">å½“å‰å€Ÿé˜…</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{userStats.totalReservation || 0}}</text>
        <text class="stat-label">ç´¯è®¡é¢„çº¦</text>
      </view>
    </view>
  </view>
  
  <!-- çƒ­é—¨å›¾ä¹¦ -->
  <view class="hot-books-section">
    <view class="section-header">
      <text class="section-title">çƒ­é—¨å›¾ä¹¦</text>
      <text class="section-more" bindtap="goToBooks">æŸ¥çœ‹æ›´å¤š</text>
    </view>
    <view class="books-list">
      <view 
        wx:for="{{hotBooks}}" 
        wx:key="id" 
        class="book-item" 
        bindtap="goToBookDetail" 
        data-id="{{item.id}}"
      >
        <image src="{{getCoverUrl(item.cover)}}" mode="aspectFill" class="book-cover" />
        <view class="book-info">
          <text class="book-title">{{item.title}}</text>
          <text class="book-author">{{item.author}}</text>
          <text class="book-borrow-count">å€Ÿé˜… {{item.borrow_count || 0}}æ¬¡</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- å…¬å‘Šä¿¡æ¯ -->
  <view class="announcement-section" wx:if="{{announcement}}">
    <view class="section-header">
      <text class="section-title">æœ€æ–°å…¬å‘Š</text>
    </view>
    <view class="announcement-card">
      <text class="announcement-title">{{announcement.title}}</text>
      <text class="announcement-content">{{announcement.content}}</text>
      <text class="announcement-time">{{announcement.created_at}}</text>
    </view>
  </view>
</view>