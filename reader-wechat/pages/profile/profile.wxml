<!-- pages/profile/profile.wxml -->
<view class="profile-page">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar" bindtap="chooseAvatar">
      <image src="{{userInfo && userInfo.avatar ? userInfo.avatar : 'https://img.yzcdn.cn/vant/cat.jpeg'}}" mode="aspectFill" />
      <view class="avatar-edit">
        <text>ç¼–è¾‘</text>
      </view>
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo && userInfo.name ? userInfo.name : 'è¯»è€…'}}</text>
      <text class="user-reader-no">è¯»è€…ç¼–å·ï¼š{{userInfo && userInfo.reader_no ? userInfo.reader_no : ''}}</text>
      <text class="user-email">{{userInfo && userInfo.email ? userInfo.email : 'æœªè®¾ç½®é‚®ç®±'}}</text>
    </view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-card">
    <view class="stats-header">
      <text class="stats-title">ä¸ªäººç»Ÿè®¡</text>
    </view>
    <view class="stats-content">
      <view class="stat-item">
        <text class="stat-value">{{userStats && userStats.totalBorrow ? userStats.totalBorrow : 0}}</text>
        <text class="stat-label">ç´¯è®¡å€Ÿé˜…</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{userStats && userStats.currentBorrow ? userStats.currentBorrow : 0}}</text>
        <text class="stat-label">å½“å‰å€Ÿé˜…</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{userStats && userStats.totalReservation ? userStats.totalReservation : 0}}</text>
        <text class="stat-label">ç´¯è®¡é¢„çº¦</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{userStats && userStats.totalOverdue ? userStats.totalOverdue : 0}}</text>
        <text class="stat-label">å†å²é€¾æœŸ</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-card">
    <view class="menu-header">
      <text class="menu-title">åŠŸèƒ½èœå•</text>
    </view>
    <view class="menu-content">
      <view class="menu-item" bindtap="goToUpdateProfile">
        <text class="menu-icon">ğŸ‘¤</text>
        <text class="menu-text">æ›´æ–°ä¸ªäººä¿¡æ¯</text>
        <text class="menu-arrow">>></text>
      </view>
      <view class="menu-item" bindtap="goToChangePassword">
        <text class="menu-icon">ğŸ”’</text>
        <text class="menu-text">ä¿®æ”¹å¯†ç </text>
        <text class="menu-arrow">>></text>
      </view>
      <view class="menu-item" bindtap="goToBorrow">
        <text class="menu-icon">ğŸ“–</text>
        <text class="menu-text">æˆ‘çš„å€Ÿé˜…</text>
        <text class="menu-arrow">>></text>
      </view>
      <view class="menu-item" bindtap="goToReservation">
        <text class="menu-icon">â°</text>
        <text class="menu-text">æˆ‘çš„é¢„çº¦</text>
        <text class="menu-arrow">>></text>
      </view>
    </view>
  </view>

  <!-- å…¶ä»–èœå• -->
  <view class="menu-card">
    <view class="menu-header">
      <text class="menu-title">å…¶ä»–</text>
    </view>
    <view class="menu-content">
      <view class="menu-item" bindtap="goToAbout">
        <text class="menu-icon">â„¹ï¸</text>
        <text class="menu-text">å…³äº</text>
        <text class="menu-arrow">>></text>
      </view>
      <view class="menu-item" bindtap="goToSettings">
        <text class="menu-icon">âš™ï¸</text>
        <text class="menu-text">è®¾ç½®</text>
        <text class="menu-arrow">>></text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view class="logout-section">
    <button class="btn-logout" type="default" bindtap="handleLogout">
      é€€å‡ºç™»å½•
    </button>
  </view>
</view>